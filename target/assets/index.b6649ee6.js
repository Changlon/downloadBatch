var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,l=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&o(e,a,t[a]);if(n)for(var a of n(t))i.call(t,a)&&o(e,a,t[a]);return e},r=(e,n)=>t(e,a(n));import{r as d,u as c,w as u,a as p,o as h,c as m,b as v,d as g,e as f,v as y,F as b,f as w,g as x,h as k,K as C,i as D,j as L,N as S,k as _,l as I,m as T,n as U,p as N,q as z,t as P,s as V,x as A,y as j,z as q,A as E,B as O,C as R,D as $,E as H,G as B}from"./vendor.3301bec0.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var F=(e,t)=>{const a=e.__vccOpts||e;for(const[n,s]of t)a[n]=s;return a};const K={setup(){let e=d("home"),t=d("/home");const a=c();u((()=>a.path),(()=>{t.value=a.path}));return{tabbarActive:e,path:t,excludeRoutes:["/sub","/order","/imageDownload","/imageList","/historyList"]}},methods:{toggle(){alert("yes")}}},M=D("批量下载"),Z=D("下载记录");var J=F(K,[["render",function(e,t,a,n,s,i){const o=p("router-view"),l=p("van-tabbar-item"),r=p("van-tabbar");return h(),m(b,null,[v(o,null,{default:g((({Component:t})=>[(h(),w(C,null,[e.$route.meta.keepAlive?(h(),w(x(t),{key:e.$route.name})):k("",!0)],1024)),e.$route.meta.keepAlive?k("",!0):(h(),w(x(t),{key:0}))])),_:1}),f(v(r,{modelValue:n.tabbarActive,"onUpdate:modelValue":t[0]||(t[0]=e=>n.tabbarActive=e)},{default:g((()=>[v(l,{replace:"",to:"/home",name:"home",icon:"down"},{default:g((()=>[M])),_:1}),v(l,{replace:"",to:"/record",name:"record",icon:"photo-o"},{default:g((()=>[Z])),_:1})])),_:1},8,["modelValue"]),[[y,!n.excludeRoutes.includes(n.path)]])],64)}]]);!function(e,t){var a=t.documentElement,n=e.devicePixelRatio||1;function s(){var e=a.clientWidth/7.5;a.style.fontSize=e+"px"}if(function e(){t.body?t.body.style.fontSize=12*n+"px":t.addEventListener("DOMContentLoaded",e)}(),s(),e.addEventListener("resize",s),e.addEventListener("pageshow",(function(e){e.persisted&&s()})),n>=2){var i=t.createElement("body"),o=t.createElement("div");o.style.border=".5px solid transparent",i.appendChild(o),a.appendChild(i),1===o.offsetHeight&&a.classList.add("hairlines"),a.removeChild(i)}}(window,document),(e=>{var t=e.ImageColorMask=function(e,t){t.debug=!!t.debug&&t.debug,this.colors=e;var a=0,n=function(e,t){return e>>t&1},s=function(e,t,a){return e&~(1<<t)|a<<t};this.writeNumber=function(i,o){var l=function(e,t){for(var a=[],s=0;s<t;s++)a.push(n(e,s));return a}(i,o),r=0,d=0;for(t.debug;r<l.length&&a<this.colors.length;){for(this.colors[a]=s(this.colors[a],d++,l[r++]);d<t.mixCount&&r<l.length;)this.colors[a]=s(this.colors[a],d++,l[r++]);if(t.debug)for(var c=d;c<8;c++)this.colors[a]=s(this.colors[a],c,0);d=0,(++a+1)%4==0&&(e[a]=255,a++)}},this.readNumber=function(e){for(var i=t.debug?[]:null,o=0,l=0,r=0;o<e&&a<this.colors.length;){var d=n(this.colors[a],r++);for(l=s(l,o++,d),t.debug&&i.push(d);r<t.mixCount&&o<e;)d=n(this.colors[a],r++),l=s(l,o++,d),t.debug&&i.push(d);r=0,(++a+1)%4==0&&a++}return t.debug,l}},a=e.ImageMask=function(e){e.debug=!!e.debug&&e.debug,e.charSize=e.charSize||16,e.mixCount=e.mixCount||2,e.lengthSize=e.lengthSize||24,e.mixCount<1&&(e.mixCount=1),e.mixCount>5&&(e.mixCount=5),e.charSize%e.mixCount!=0&&(e.charSize+=e.mixCount-e.charSize%e.mixCount),e.lengthSize%e.mixCount!=0&&(e.lengthSize+=e.mixCount-e.lengthSize%e.mixCount),this.opts=e};a.prototype.hideText=function(e,a){var n=e.getContext("2d"),s=n.canvas.width*n.canvas.height;if(this.opts.lengthSize+a.length*this.opts.charSize>3*s*this.opts.mixCount)throw"text is too long for the image.";var i=n.getImageData(0,0,n.canvas.width,n.canvas.height),o=new t(i.data,this.opts);o.writeNumber(a.length,this.opts.lengthSize);for(var l=0;l<a.length;l++)o.writeNumber(a.charCodeAt(l),this.opts.charSize);n.putImageData(i,0,0)},a.prototype.revealText=function(e){var a=e.getContext("2d"),n=a.canvas.width*a.canvas.height,s=a.getImageData(0,0,a.canvas.width,a.canvas.height),i=new t(s.data,this.opts),o=i.readNumber(this.opts.lengthSize);if(this.opts.lengthSize+o*this.opts.charSize>3*n*this.opts.mixCount)return"";if(o<=0)return"";for(var l=[],r=0;r<o;r++){var d=i.readNumber(this.opts.charSize);l.push(String.fromCharCode(d))}return l.join("")},a.prototype.maxTextLength=function(e){var t=e.getContext("2d");return(3*(t.canvas.width*t.canvas.height)*this.opts.mixCount-this.opts.lengthSize)/this.opts.charSize},a.prototype.maxFileSize=function(e){var t=e.getContext("2d");return(3*(t.canvas.width*t.canvas.height)*this.opts.mixCount-8-this.opts.lengthSize-255*this.opts.charSize)/8},a.prototype.hideFile=function(e,a,n){var s=new FileReader,i=this;s.addEventListener("loadend",(function(s){var o=new Uint8Array(s.target.result),l=a.name,r=e.getContext("2d"),d=r.canvas.width*r.canvas.height;if(8+l.length*i.opts.charSize+i.opts.lengthSize+8*o.length>3*d*i.opts.mixCount)n({success:!1,message:"file is too big for the image."});else{var c=r.getImageData(0,0,r.canvas.width,r.canvas.height),u=new t(c.data,i.opts);u.writeNumber(l.length,8);for(var p=0;p<l.length;p++)u.writeNumber(l.charCodeAt(p),i.opts.charSize);u.writeNumber(o.length,i.opts.lengthSize);for(p=0;p<o.length;p++)u.writeNumber(o[p],8);r.putImageData(c,0,0),n({success:!0})}})),s.readAsArrayBuffer(a)},a.prototype.revealFile=function(e){var a=e.getContext("2d"),n=a.canvas.width*a.canvas.height,s=a.getImageData(0,0,a.canvas.width,a.canvas.height),i=new t(s.data,this.opts),o=i.readNumber(8);if(8+o*this.opts.charSize>3*n*this.opts.mixCount)return null;for(var l=[],r=0;r<o;r++){var d=i.readNumber(this.opts.charSize);l.push(String.fromCharCode(d))}var c=i.readNumber(this.opts.lengthSize);if(8+o*this.opts.charSize+this.opts.lengthSize+8*c>3*n*this.opts.mixCount)return null;if(c<=0)return null;var u=new ArrayBuffer(c),p=new Uint8Array(u);for(r=0;r<c;r++){var h=i.readNumber(8);p[r]=h}return{name:l.join(""),data:p}},e.mask=new a({debug:!1});let n=new Image;n.onload=function(){var e=document.getElementById("canvas").getContext("2d");e.canvas.width=n.width,e.canvas.height=n.height,e.drawImage(n,0,0)},n.src="src/assets/logo.png"})(window);var G=window;async function W(){let e=(new Date).getTime();e=(e+"").substring(0,9);let t=L.enc.Base64.stringify(L.enc.Utf8.parse(e))+"\n";return L.HmacMD5(t,L.enc.Base64.parse(await new Promise((e=>{setTimeout((()=>{let t=G.document.getElementById("canvas"),a=G.mask.revealText(t);a&&e(a)}))})))).toString()}function Q(e){if(G.localStorage)return G.localStorage.getItem(e)}const Y={name:"Home",setup(){let e=d([0,1,3,6,12]),t=d(""),a=d(!1),n=e.value.map((e=>0===e?"最近1星期":12===e?"最近1年":`最近${e}个月`));return{dateFieldRound:e,dateFieldRoundStr:n,showPicker:a,value:n[0],link:t}},created(){var e,t;this.postData.openid=function(e){let t=G.location.href.substring(G.location.href.indexOf("?")+1).split("&");for(let a=0;a<t.length;a++){let n=t[a].split("=");if(n[0]==e)return n[1]}return!1}("openid")||Q("openid"),this.postData.openid&&(e="openid",t=this.postData.openid,G.localStorage&&G.localStorage.setItem(e,t))},data:()=>({postData:{link:"",username:"",linkType:"",shortcode:"",openid:"",days:7,scene:"batch"}}),methods:{setPicker(e){this.showPicker=e},onConfirm(e,t){this.onCancel(),this.postData.days=0===this.dateFieldRound[t]?7:30*this.dateFieldRound[t],this.value=this.dateFieldRoundStr[t]},onChange(e,t){},onCancel(){this.setPicker(!1)},download(){const e=this;return e.postData.openid?e.postData.link?void this.$router.push({params:e.postData,name:"imageList",query:{timestamp:(new Date).getTime()}}):S("请输入链接"):S("没有用户数据")}},watch:{link(e){const t=this,a=function(e){if(!new RegExp("http(s)?://(www.)?instagram.com/","g").test(e))return;const t=/(\w+):\/\/(www\.)?instagram.com(.+)\//.exec(e),a=t[0],n=t[3].split("/");let s,i,o;return n.shift(),1===n.length?(i="index",s=n[0]):2===n.length?(i=n[0],o=n[1]):3===n.length&&(s=n[0],i=n[1],o=n[2]),{link:a,username:s,type:i,shortcode:o}}(e);a&&(t.postData.link=a.link,t.postData.username=a.username,t.postData.linkType=a.type,t.postData.shortcode=a.shortcode)}}},X=I('<div class="top-box"><div class="text-center"><img src="/assets/logo.8d82676c.png" style="width:100px;" alt=""></div><div class="van-multi-ellipsis--20 logo-tip"> 一键极速 <i class="ins ins-jisu"></i> <br> 便捷批量 <i class="ins ins-batch"></i> <br> 保存Instagrem 博主所有帖子资源 <i class="ins ins-xiazai"></i></div></div>',1),ee={class:"input-box"},te={class:"margin-top-3",style:{width:"97%",margin:"30px auto"}},ae=D(" 下载 ");var ne=F(Y,[["render",function(e,t,a,n,s,i){const o=p("van-search"),l=p("van-field"),r=p("van-picker"),d=p("van-popup"),c=p("van-button");return h(),m("div",null,[X,_("div",ee,[v(o,{shape:"round",modelValue:n.link,"onUpdate:modelValue":t[0]||(t[0]=e=>n.link=e),placeholder:"请粘贴博主页链接"},null,8,["modelValue"]),v(l,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),"is-link":"",readonly:"",label:"时间范围",placeholder:"选择要保存的时间范围",onClick:t[2]||(t[2]=e=>i.setPicker(!0))},null,8,["modelValue"]),v(d,{show:n.showPicker,"onUpdate:show":t[3]||(t[3]=e=>n.showPicker=e),round:"",position:"bottom"},{default:g((()=>[v(r,{columns:n.dateFieldRoundStr,onCancel:i.onCancel,onConfirm:i.onConfirm},null,8,["columns","onCancel","onConfirm"])])),_:1},8,["show"])]),_("div",te,[v(c,{type:"primary",block:"",onClick:i.download},{default:g((()=>[ae])),_:1},8,["onClick"])])])}]]),se={timeout:25e3,dev:{domain:"http://5195n943r7.wicp.vip/",port:""},pro:{domain:"http://5195n943r7.wicp.vip/",port:""}};const{dev:ie,pro:oe}=se,{domain:le,port:re}="production".startsWith("dev")?ie:oe,de=`${le.startsWith("http")?le:"http://"+le}${re?":"+re:""}/api/wechat/common`,ce=T.create({baseURL:de,timeout:se.timeout});var ue=async(e,t={},a="get",n=!1)=>{if("get"===(a=a.toLowerCase())||"delete"===a||"del"===a)return a="del"===a?"delete":a,await ce[a](e,{headers:{"Content-Type":n?"application/json":"application/x-www-form-urlencoded",Sign:await W()},data:n?JSON.stringify(t):U.stringify(t)});if("put"===a||"post"===a)return await ce[a](e,n?JSON.stringify(t):U.stringify(t),{headers:{"Content-Type":n?"application/json":"application/x-www-form-urlencoded",Sign:await W()}});throw new Error("不支持其他请求!")};const pe=async(e,t)=>ue(`/downloadZipFile?openid=${e}&${t}`,{},"post"),he=async({cateId:e=1,start:t=1,count:a=20})=>new Promise((e=>{setTimeout((()=>{e({data:[{id:1,account:"杜兰特",username:"esakdjashidhaisd",profile_url:"https://cdn.jsdelivr.net/npm/@vant/assets/cat.jpeg",is_sub:!0},{id:1,account:"詹姆斯",username:"king_james",profile_url:"https://cdn.jsdelivr.net/npm/@vant/assets/cat.jpeg",is_sub:!0}],total:2})}),1e3)})),me={name:"Record",setup(){let e=d(""),t=d(!0);const a=d([]),n=d(!1),s=N();u(a,(e=>{a.value=e.sort(((e,t)=>t.messionTimestamp-e.messionTimestamp))}),{deep:!0});return{openid:e,loading:t,list:a,finished:n,onLoad:async()=>{let s=await(async e=>ue("/queryBatchHistory",{openId:e},"post"))(e.value);t.value=!1,n.value=!0,0===s.data.code?(a.value=s.data.data,S({type:"success",message:s.data.msg,duration:1e3})):S({type:"danger",message:s.data.msg,duration:2e3})},formatHistoryTimestamp:e=>{const t=new Date(e);return`${t.getFullYear()}/${t.getMonth()+1}/${t.getDate()} ${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}`},onClickLeft:()=>{s.push({name:"home"})},viewHistory:(t,a)=>{s.push({name:"historyList",params:{hId:t,openid:e.value,username:a}})}}},created(){this.openid=Q("openid"),this.openid||S({type:"danger",message:"没有检测到用户的openid,请重新打开进入!",duration:2e3})}},ve={style:{"padding-left":"4px"},class:"shenglue-sm"},ge=D("查看"),fe={style:{"padding-left":"4px"}},ye=_("div",{class:"padding-bottom-3"},null,-1);var be=F(me,[["render",function(e,t,a,n,s,i){const o=p("van-nav-bar"),l=p("van-button"),r=p("van-cell"),d=p("van-list");return h(),m(b,null,[v(o,{"left-text":"返回","left-arrow":"",title:"下载记录",onClickLeft:n.onClickLeft},null,8,["onClickLeft"]),v(d,{loading:n.loading,"onUpdate:loading":t[0]||(t[0]=e=>n.loading=e),finished:n.finished,"finished-text":"没有更多了",onLoad:n.onLoad},{default:g((()=>[(h(!0),m(b,null,z(n.list,(e=>(h(),w(r,{key:e},{icon:g((()=>[])),title:g((()=>[_("span",ve,"博主: "+P(e.insUsername),1)])),value:g((()=>[v(l,{color:"#7232dd",size:"mini",onClick:t=>n.viewHistory(e.historyId,e.insUsername)},{default:g((()=>[ge])),_:2},1032,["onClick"])])),label:g((()=>[_("span",fe," 时间 ： "+P(n.formatHistoryTimestamp(1e3*e.messionTimestamp)),1)])),_:2},1024)))),128))])),_:1},8,["loading","finished","onLoad"]),ye],64)}]]);const we={class:"sub-box"},xe={style:{"padding-left":"4px"},class:"shenglue-sm"},ke={style:{"padding-left":"4px"}},Ce={class:"ins-list"},De={class:"ins-list-num"},Le={style:{"padding-left":"10px"},class:"shenglue"},Se={style:{"padding-left":"10px"}};var _e=F({name:"Subscribe",setup(){const e=d(0),t=d(""),a=d([]),n=d([]),s=d(!0),i=d(!1),o=d(1),l=d([]),r=d(0);u(t,(async e=>{const t=await(async({name:e,start:t=1,count:a=20})=>({data:[{id:1,account:"account",username:"xxxx",profile_url:"https://cdn.jsdelivr.net/npm/@vant/assets/cat.jpeg",is_sub:!1},{id:1,account:"account",username:"xxxx",profile_url:"https://cdn.jsdelivr.net/npm/@vant/assets/cat.jpeg",is_sub:!0}],total:100}))({name:e,start:o.value});a.value=t.data}));return V((async()=>{let e=await(async()=>({data:[{id:1,text:"订阅"},{id:2,text:"热门"},{id:3,text:"全部"},{id:4,text:"内地"},{id:5,text:"港台"},{id:6,text:"泰国"},{id:7,text:"日韩"},{id:8,text:"欧美"},{id:9,text:"星粉"},{id:10,text:"萌娃"},{id:11,text:"品牌"},{id:12,text:"穿搭"},{id:13,text:"美甲"},{id:14,text:"美妆"},{id:15,text:"美发"},{id:16,text:"纹身"},{id:17,text:"美女"},{id:18,text:"体育"},{id:19,text:"美食"},{id:20,text:"摄影"},{id:21,text:"花艺"},{id:22,text:"艺术"},{id:23,text:"旅行"}]}))();l.value=e.data,r.value=l.value[0],e=await he({cateId:r.value,start:o.value}),n.value=e.data,s.value=!1,n.value.length>=e.total?i.value=!0:i.value=!1})),{searchList:a,insUserList:n,loading:s,finished:i,onLoad:async()=>{s.value=!0;let e=await he({cateId:r.value,start:o.value});s.value=!1,n.value=[...n.value,...e.data],n.value.length>=e.total?i.value=!0:i.value=!1},clickNav:async e=>{const{id:t}=l.value[e];r.value=t,o.value=1,n.value=[],s.value=!0,i.value=!1;let a=await he({cateId:r.value,start:o.value});s.value=!1,n.value=a.data,n.value.length>=a.total?i.value=!0:i.value=!1},activeIndex:e,searchTxt:t,start:o,items:l}}},[["render",function(e,t,a,n,s,i){const o=p("van-search"),l=p("van-image"),r=p("van-button"),d=p("van-cell"),c=p("van-list"),u=p("van-tree-select");return h(),m("div",we,[v(o,{shape:"round",modelValue:n.searchTxt,"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchTxt=e),placeholder:"请输入博主的名字，拼音，或ID"},null,8,["modelValue"]),f(v(u,{height:"740px","main-active-index":n.activeIndex,"onUpdate:main-active-index":t[2]||(t[2]=e=>n.activeIndex=e),items:n.items,onClickNav:n.clickNav},{content:g((()=>[v(c,{loading:n.loading,"onUpdate:loading":t[1]||(t[1]=e=>n.loading=e),finished:n.finished,"finished-text":"没有更多了",onLoad:n.onLoad},{default:g((()=>[(h(!0),m(b,null,z(n.insUserList,(e=>(h(),w(d,{key:e},{icon:g((()=>[v(l,{round:"",width:"50px",height:"50px",fit:"fill",position:"left",src:e.profile_url},null,8,["src"])])),title:g((()=>[_("span",xe,P(e.username),1)])),value:g((()=>[v(r,{color:"#7232dd",size:"mini"},{default:g((()=>[D(P(e.is_sub?"取消订阅":"订阅"),1)])),_:2},1024)])),label:g((()=>[_("span",ke,P(e.account),1)])),_:2},1024)))),128))])),_:1},8,["loading","finished","onLoad"])])),_:1},8,["main-active-index","items","onClickNav"]),[[y,!n.searchTxt]]),f(_("div",Ce,[_("div",De,"找到了 "+P(n.searchList.length)+" 个结果",1),(h(!0),m(b,null,z(n.searchList,(e=>(h(),w(d,{key:e},{icon:g((()=>[v(l,{round:"",width:"50px",height:"50px",fit:"fill",position:"left",src:e.profile_url},null,8,["src"])])),title:g((()=>[_("span",Le,P(e.username),1)])),value:g((()=>[v(r,{color:"#7232dd",size:"small"},{default:g((()=>[D(P(e.is_sub?"取消订阅":"订阅"),1)])),_:2},1024)])),label:g((()=>[_("span",Se,P(e.account),1)])),_:2},1024)))),128))],512),[[y,n.searchTxt]])])}],["__scopeId","data-v-6196340c"]]),Ie="/assets/empty.71f97874.png",Te="/assets/working.ea14b626.png";const Ue={name:"ImageList",setup(){A();const e=c(),t=N();let a=d(e.params),n=d(!0),s=d(!1),i=d(!0),o=d({}),p=d([]),h=d(0),m=d(""),v=d("p"),g=d(!1);u(p,(e=>{let t=0;e.forEach((({checked:e})=>{e&&t++})),h.value=t}),{deep:!0});return V((async()=>{var e;let s;S({type:"success",message:"正在获取批量结果",duration:500}),"p"===a.value.linkType&&a.value.username&&(a.value.link=`https://www.instagram.com/${a.value.username}/`,a.value.linkType="index");try{if(s=await(async e=>ue("/batchDownloadMessionInfo",e,"post"))(a.value),500===s.data.code)return S({type:"danger",message:s.data.msg,duration:2e3})&&t.back()}catch(h){S({type:"danger",message:h.message,duration:2e3}),n.value=!1}let d=null==(e=null==s?void 0:s.data)?void 0:e.data,c=setTimeout((async function e(){if(!d)return clearTimeout(c);try{if(s=await(async e=>ue("/queryInsUserInfo",e,"post"))(d),!s.data.data)return clearTimeout(c),setTimeout(e,500);const t=s.data.data;i.value=!1,o.value=t}catch(h){clearInterval(c),S({type:"danger",message:s.data.data.msg,duration:2e3})}}),500);let u=setTimeout((async function e(t=0,a=0,i=!0){if(!d)return clearTimeout(u);try{n.value=!0,s=await(async e=>ue("/queryBatchDownloadResult",e,"post"))(r(l({},d),{corsor:t,corsorType:a}));const o=s.data.data;if(t=o.corsor,a=o.corsorType,i=o.hasNext,1===a&&!1===i)return n.value=!1,clearTimeout(u);!1===i&&1!==a&&(a=1,t=0);const c=o.insPostData;for(let e of c)try{e=JSON.parse(e),e.checked=!0,p.value.push(e)}catch(h){S({type:"danger",message:h.message,duration:1e3})}n.value=!1,setTimeout((async()=>{await e(t,a,i)}),1e3)}catch(h){clearInterval(u),S({type:"danger",message:s.data.data.msg,duration:2e3}),n.value=!1}}),1e3)})),{loadding:n,downLoadding:s,skeletonLoadding:i,insUserData:o,insPostData:p,postCheckedNum:h,postDownloadZip:m,activeName:v,onClickLeft:()=>{t.push({name:"home"})},followNumHandler:e=>e/1e4>=1?e/1e4+" 万":e,queryDetial:e=>{t.push({params:r(l({},a.value),{mediaKey:e,name:"imageList"}),name:"ImageDownload",query:{timestamp:(new Date).getTime()}})},subscribe:e=>{alert(e)},downloadBatch:async()=>{const e=a.value.openid||Q("openid"),t=[];for(let{mediaKey:a,checked:n}of p.value)n&&t.push(a);if(t.length<=0)return S({type:"danger",message:"请选择批量下载的帖子"});if(e&&t.length>0){let a="";for(let e of t)a+=`&mediaList=${e}`;s.value=!0;let n=await pe(e,a);s.value=!1,m.value=n.data.data,S({type:"success",message:"批量下载成功，复制zip链接在浏览器打开",duration:1e3})}else S({type:"danger",message:"没有用户openid",duration:1e3})},overlayShow:g}},data:()=>({a:(new Date).getTime()}),mounted(){},methods:{changeTab(e){}}},Ne=e=>(j("data-v-3b0fe153"),e=e(),q(),e),ze={class:"ins-user-head"},Pe={class:"ins-user-top"},Ve={class:"ins-user-avatar"},Ae={class:"ins-user-info"},je={class:"ins-user-name shenglue"},qe={class:"ins-user-account-name"},Ee={class:"ins-user-subscribe"},Oe=[Ne((()=>_("i",{class:"ins ins-gengduo"},null,-1)))],Re={class:"ins-user-account-data"},$e={class:"post-num"},He={class:"fans-num"},Be={class:"follow"},Fe={class:"ins-user-desc"},Ke=D(" 帖子"),Me={class:"post-box"},Ze=["onClick"],Je={key:0,style:{margin:"100px auto"}},Ge=[Ne((()=>_("img",{src:Ie,style:{width:"200px"},alt:""},null,-1)))],We={class:"margin-top-3",style:{width:"97%",margin:"30px auto"}},Qe=["href"],Ye=D(" IGTV"),Xe=Ne((()=>_("div",{style:{padding:"80px"}},[_("img",{src:Te,style:{width:"200px"},alt:""})],-1))),et=D(" 已标记"),tt=Ne((()=>_("div",{style:{padding:"80px"}},[_("img",{src:Te,style:{width:"200px"},alt:""})],-1))),at=Ne((()=>_("div",{class:"margin-top-3"},null,-1))),nt=D("加载中..."),st={style:{position:"fixed",width:"100%",bottom:"10px"}},it={style:{color:"#000"}},ot=Ne((()=>_("div",{style:{"margin-top":"10px"}},null,-1))),lt=Ne((()=>_("span",{style:{color:"#000"}},"取消",-1)));var rt=F(Ue,[["render",function(e,t,a,n,s,i){const o=p("van-nav-bar"),l=p("van-skeleton"),r=p("van-image"),d=p("van-icon"),c=p("van-checkbox"),u=p("van-button"),x=p("van-tab"),L=p("van-tabs"),S=p("van-loading"),I=p("van-overlay");return h(),m(b,null,[v(o,{"left-text":"返回","left-arrow":"",title:"资源列表",onClickLeft:n.onClickLeft},null,8,["onClickLeft"]),f(v(l,{class:"margin-top-1",title:"",row:3},null,512),[[y,n.skeletonLoadding]]),(h(),w(C,null,[f(_("div",ze,[_("div",Pe,[_("div",Ve,[v(r,{round:"",width:"50px",height:"50px",fit:"cover",position:"left",src:n.insUserData.insUserPic},null,8,["src"])]),_("div",Ae,[_("div",je,P(n.insUserData.insUserFullName),1),_("div",qe,P(n.insUserData.insUserName),1)]),_("div",Ee,P(n.insUserData.hasSubscribe?"已订阅":"未订阅"),1),_("div",{class:"ins-user-subscriber-action",onClick:t[0]||(t[0]=e=>n.overlayShow=!0)},Oe)]),_("div",Re,[_("div",$e,P(n.insUserData.articleQuantity)+" 帖子",1),_("div",He,P(n.followNumHandler(n.insUserData.followedBy))+"粉丝",1),_("div",Be,P(n.followNumHandler(n.insUserData.followed))+" 关注",1)]),_("div",Fe,P(n.insUserData.biography),1)],512),[[y,!n.skeletonLoadding]])],1024)),v(L,{active:n.activeName,"onUpdate:active":t[1]||(t[1]=e=>n.activeName=e),color:"#DCDCDC","line-height":"2px",onChange:i.changeTab},{default:g((()=>[v(x,{name:"p"},{title:g((()=>[v(d,{name:"qr"}),Ke])),default:g((()=>[f(v(l,{class:"margin-top-1",title:"",row:3},null,512),[[y,n.skeletonLoadding]]),f(_("div",Me,[(h(!0),m(b,null,z(n.insPostData,((e,t)=>(h(),m("div",{class:"post-type margin-top",key:t},[_("i",{class:E(["post-type-position ins",2===e.isVideo?"ins-shexiangtou":8===e.isVideo?"ins-duotu":""])},null,2),v(c,{class:"post-checkbox-position",shape:"square",modelValue:e.checked,"onUpdate:modelValue":t=>e.checked=t},null,8,["modelValue","onUpdate:modelValue"]),_("div",{class:"post-img-wrap",onClick:t=>n.queryDetial(e.mediaKey)},[v(r,{width:"100px",height:"100px",fit:"cover",position:"left",src:e.postDisplay},null,8,["src"])],8,Ze)])))),128)),n.insPostData.length<=0?(h(),m("div",Je,Ge)):k("",!0)],512),[[y,!n.skeletonLoadding]]),f(_("div",We,[v(u,{type:"primary",block:"",onClick:n.downloadBatch,loading:n.downLoadding},{default:g((()=>[D(" 已选择 "+P(n.postCheckedNum)+" 批量下载 ",1)])),_:1},8,["onClick","loading"])],512),[[y,n.insPostData.length>0]]),f(_("a",{class:"down-tip",href:n.postDownloadZip,ref:"down"}," 点击下载压缩文件 ",8,Qe),[[y,n.postDownloadZip]])])),_:1}),v(x,{name:"tv"},{title:g((()=>[v(d,{name:"video-o"}),Ye])),default:g((()=>[Xe])),_:1}),v(x,{name:"tag"},{title:g((()=>[v(d,{name:"bookmark-o"}),et])),default:g((()=>[tt])),_:1})])),_:1},8,["active","onChange"]),at,f(v(S,{size:"34px",vertical:"",style:{"text-align":"center"}},{default:g((()=>[nt])),_:1},512),[[y,n.loadding]]),v(I,{show:n.overlayShow,onClick:t[3]||(t[3]=e=>n.overlayShow=!1)},{default:g((()=>[_("div",st,[v(u,{color:"#fff",type:"primary",block:"",onClick:t[2]||(t[2]=O((e=>n.subscribe(n.insUserData.insUserId)),["stop"]))},{default:g((()=>[_("span",it,P(n.insUserData.hasSubscribe?"取消订阅 TA":"订阅 TA"),1)])),_:1}),ot,v(u,{color:"#fff",type:"primary",block:""},{default:g((()=>[lt])),_:1})])])),_:1},8,["show"])],64)}],["__scopeId","data-v-3b0fe153"]]);const dt={name:"Order",data:()=>({agreement:!1,list:[{id:1,name:"3天",price:19,oldprice:29,checked:!0},{id:2,name:"一个月",price:29,oldprice:59,checked:!1},{id:3,name:"一个季度",price:"23/月",oldprice:99,checked:!1},{id:4,name:"一年SIVP",price:149,oldprice:199,checked:!1},{id:5,name:"终身SVIP",price:"199",oldprice:299,checked:!1}],selected:{id:1,name:"连续包年",price:"189",oldprice:"389",checked:!0}}),methods:{share(){},chooseTc(e){this.list.forEach((e=>{e.checked=!1})),this.list[e].checked=!0,this.selected={},this.selected=this.list[e]},submit(){this.agreement}}},ct=e=>(j("data-v-f7bbb4a0"),e=e(),q(),e),ut={class:"container"},pt={class:"notice"},ht=ct((()=>_("p",null,[_("i",{class:"iconfont icon-laba1"}),D("邀6好友关注公众号，获一周下载体验包!")],-1))),mt=[ct((()=>_("span",null,"邀请",-1))),ct((()=>_("i",{class:"iconfont icon-sanjiaoyou"},null,-1)))],vt=ct((()=>_("div",{class:"banner"},[_("h4",null,"开通年卡 尊享SVIP特权"),_("p",null,"优惠套餐限时抢购"),_("i",{class:"iconfont icon-huangguan"})],-1))),gt={class:"qy-tc"},ft=I('<h2 data-v-f7bbb4a0><span data-v-f7bbb4a0>SVIP 年卡会员权益</span></h2><div class="qy" data-v-f7bbb4a0><ul data-v-f7bbb4a0><li data-v-f7bbb4a0><div class="icon" data-v-f7bbb4a0><i class="ins ins-jisu" data-v-f7bbb4a0></i></div><p data-v-f7bbb4a0>批量下载</p></li><li data-v-f7bbb4a0><div class="icon" data-v-f7bbb4a0><i class="ins ins-dingyue" data-v-f7bbb4a0></i></div><p data-v-f7bbb4a0>博主订阅</p></li><li data-v-f7bbb4a0><div class="icon" data-v-f7bbb4a0><i class="ins ins-xiaochengxu" data-v-f7bbb4a0></i></div><p data-v-f7bbb4a0>存图小程序</p></li><li data-v-f7bbb4a0><div class="icon" data-v-f7bbb4a0><i class="ins ins-app" data-v-f7bbb4a0></i></div><p data-v-f7bbb4a0>App下载</p></li></ul></div><h2 data-v-f7bbb4a0><span data-v-f7bbb4a0>会员套餐</span><a data-v-f7bbb4a0><i class="iconfont icon-info" data-v-f7bbb4a0></i>会员套餐</a></h2>',3),yt={class:"tc"},bt=["onClick"],wt=ct((()=>_("span",null,"¥",-1))),xt={class:"submit"};var kt=F(dt,[["render",function(e,t,a,n,s,i){return h(),m(b,null,[_("div",ut,[_("div",pt,[ht,_("button",{onClick:t[0]||(t[0]=(...e)=>i.share&&i.share(...e))},mt)]),vt]),_("div",gt,[ft,_("div",yt,[_("ul",null,[(h(!0),m(b,null,z(s.list,((e,t)=>(h(),m("li",{class:E(e.checked?"on":""),onClick:e=>i.chooseTc(t),key:t},[_("p",null,P(e.name),1),_("p",null,[wt,D(P(e.price),1)]),_("p",null,P("number"==typeof e.oldprice?"原价:¥"+e.oldprice:e.oldprice),1),f(_("i",null,"立省"+P(e.oldprice-parseInt(e.price)),513),[[y,"number"==typeof e.oldprice]])],10,bt)))),128))])]),_("div",xt,[_("button",{onClick:t[1]||(t[1]=(...e)=>i.submit&&i.submit(...e))},"立即开通会员")])])],64)}],["__scopeId","data-v-f7bbb4a0"]]);const Ct={name:"ImageDownload",setup(){const e=c(),t=N();let a=d(e.params),n=d(!0),s=d(!0),i=d([]),o=d(""),r=d("全选");return u(i,(e=>{for(let{checked:t,media_ins_type:a}of e)if("item"===a&&t)return r.value="取消";r.value="全选"}),{deep:!0}),V((async()=>{if(!a.value.mediaKey)return n.value=!1;let e=await(async e=>ue("/queryPostDetail",e,"post"))(a.value);if(n.value=!1,0!==e.data.code)return S({type:"danger",message:e.data.msg,duration:2e3});let t=e.data.data.locals||[];i.value=t,i.value.forEach((async e=>{if(e.checked=!0,"caption"===e.media_ins_type){let t=e.media_url;o.value=t}})),r.value="取消"})),{onClickLeft:()=>{t.push({params:l({},a.value),name:e.params.name})},checked:s,skeletonLoadding:n,insPostData:i,caption:o,checkAllText:r}},data:()=>({}),methods:{checkAll(){"取消"===this.checkAllText?this.insPostData.map((e=>e.checked=!1)):"全选"===this.checkAllText&&this.insPostData.map((e=>e.checked=!0))},download(){},copyCaptionLink(){(function(e){var t=document.createElement("div");t.innerText=e,t.style.position="absolute",t.style.top="0px",t.style.right="-9999px",document.body.appendChild(t);var a=document.createRange();a.selectNode(t),G.getSelection().removeAllRanges(),G.getSelection().addRange(a),document.execCommand("copy"),t.parentNode.removeChild(t);try{return!0}catch(n){return!1}})(this.caption)&&S({type:"success",message:"复制文案链接成功,粘贴到浏览器查看文案！",duration:3e3})}}},Dt=e=>(j("data-v-a32e1f08"),e=e(),q(),e),Lt={class:"post-box"},St={key:0,style:{margin:"100px auto"}},_t=[Dt((()=>_("img",{src:Ie,style:{width:"200px"},alt:""},null,-1)))],It={key:1},Tt=Dt((()=>_("div",{class:"tip"},[_("p",null,"提示："),_("p",null,"1. 图片 右击另存为 (pc端); 长按下载 (移动浏览器)"),_("p",null,"2. 视频点击最右边的控件选择下载")],-1))),Ut={class:"post-box"},Nt={key:0},zt={key:1},Pt=["src"],Vt=D("复制文案链接");var At=F(Ct,[["render",function(e,t,a,n,s,i){const o=p("van-nav-bar"),l=p("van-skeleton"),r=p("van-image"),d=p("van-button");return h(),m(b,null,[v(o,{"left-text":"返回","left-arrow":"",title:"下载帖子资源",onClickLeft:n.onClickLeft},null,8,["onClickLeft"]),f(v(l,{class:"margin-top-1",title:"",row:3},null,512),[[y,n.skeletonLoadding]]),f(_("div",Lt,[n.insPostData.length<=0?(h(),m("div",St,_t)):(h(),m("div",It,[Tt,_("div",Ut,[(h(!0),m(b,null,z(n.insPostData,((e,t)=>(h(),m("div",{class:"post-type margin-top",key:t},["image"===e.media_type&&"item"===e.media_ins_type?(h(),m("div",Nt,[v(r,{width:"100px",height:"100px",fit:"fill",position:"left",src:e.media_url},null,8,["src"])])):k("",!0),"video"===e.media_type?(h(),m("div",zt,[_("video",{width:"300",height:"150",src:e.media_url,controls:""},null,8,Pt)])):k("",!0)])))),128))])]))],512),[[y,!n.skeletonLoadding]]),v(d,{style:{"margin-left":"10px"},type:"primary",size:"small",onClick:i.copyCaptionLink},{default:g((()=>[Vt])),_:1},8,["onClick"])],64)}],["__scopeId","data-v-a32e1f08"]]);const jt={name:"HistoryList",setup(){const e=c(),t=N();let a=d(e.params),n=d(!0),s=d(!1),i=d(!0),o=d({}),p=d([]),h=d(0),m=d(""),v=d("p"),g=d(!1);u(p,(e=>{let t=0;e.forEach((({checked:e})=>{e&&t++})),h.value=t}),{deep:!0});return V((async()=>{if(S({type:"success",message:"正在获取历史结果",duration:500}),!a.value.hId)return S({type:"danger",message:"没有请求的历史id",duration:500})&&t.back();!async function(){try{const e=(await(async(e,t)=>ue("/queryInsUserInfo",{openid:e,username:t},"post"))(a.value.openid||Q("openid"),a.value.username)).data.data;i.value=!1,o.value=e}catch(e){S({type:"danger",message:res.data.data.msg,duration:2e3})}}(),async function(){try{n.value=!0;let t=await(async(e,t=0,a=0)=>ue("/queryBatchHistoryResult",{historyId:e,corsor:t,corsorType:a},"post"))(a.value.hId,0,0);n.value=!1,i.value=!1;const s=t.data.data.insPostData;for(let a of s)try{a=JSON.parse(a),a.checked=!0,p.value.push(a)}catch(e){S({type:"danger",message:e.message,duration:1e3})}}catch(e){S({type:"danger",message:res.data.data.msg,duration:2e3}),n.value=!1}}()})),{loadding:n,downLoadding:s,skeletonLoadding:i,insUserData:o,insPostData:p,postCheckedNum:h,postDownloadZip:m,activeName:v,onClickLeft:()=>{t.push({name:"home"})},followNumHandler:e=>e/1e4>=1?e/1e4+" 万":e,queryDetial:e=>{t.push({params:r(l({},a.value),{mediaKey:e,name:"historyList"}),name:"ImageDownload",query:{timestamp:(new Date).getTime()}})},subscribe:e=>{alert(e)},downloadBatch:async()=>{const e=a.value.openid||Q("openid"),t=[];for(let{mediaKey:a,checked:n}of p.value)n&&t.push(a);if(t.length<=0)return S({type:"danger",message:"请选择批量下载的帖子"});if(e&&t.length>0){let a="";for(let e of t)a+=`&mediaList=${e}`;s.value=!0;let n=await pe(e,a);s.value=!1,m.value=n.data.data,S({type:"success",message:"批量下载成功，复制zip链接在浏览器打开",duration:1e3})}else S({type:"danger",message:"没有用户openid",duration:1e3})},overlayShow:g}},data:()=>({a:(new Date).getTime()}),mounted(){},methods:{changeTab(e){}}},qt=e=>(j("data-v-627815ee"),e=e(),q(),e),Et={class:"ins-user-head"},Ot={class:"ins-user-top"},Rt={class:"ins-user-avatar"},$t={class:"ins-user-info"},Ht={class:"ins-user-name shenglue"},Bt={class:"ins-user-account-name"},Ft={class:"ins-user-subscribe"},Kt=[qt((()=>_("i",{class:"ins ins-gengduo"},null,-1)))],Mt={class:"ins-user-account-data"},Zt={class:"post-num"},Jt={class:"fans-num"},Gt={class:"follow"},Wt={class:"ins-user-desc"},Qt=D(" 帖子"),Yt={class:"post-box"},Xt=["onClick"],ea={key:0,style:{margin:"100px auto"}},ta=[qt((()=>_("img",{src:Ie,style:{width:"200px"},alt:""},null,-1)))],aa={class:"margin-top-3",style:{width:"97%",margin:"30px auto"}},na=["href"],sa=D(" IGTV"),ia=qt((()=>_("div",{style:{padding:"80px"}},[_("img",{src:Te,style:{width:"200px"},alt:""})],-1))),oa=D(" 已标记"),la=qt((()=>_("div",{style:{padding:"80px"}},[_("img",{src:Te,style:{width:"200px"},alt:""})],-1))),ra=qt((()=>_("div",{class:"margin-top-3"},null,-1))),da=D("加载中..."),ca={style:{position:"fixed",width:"100%",bottom:"10px"}},ua={style:{color:"#000"}},pa=qt((()=>_("div",{style:{"margin-top":"10px"}},null,-1))),ha=qt((()=>_("span",{style:{color:"#000"}},"取消",-1)));var ma=F(jt,[["render",function(e,t,a,n,s,i){const o=p("van-nav-bar"),l=p("van-skeleton"),r=p("van-image"),d=p("van-icon"),c=p("van-checkbox"),u=p("van-button"),x=p("van-tab"),L=p("van-tabs"),S=p("van-loading"),I=p("van-overlay");return h(),m(b,null,[v(o,{"left-text":"返回","left-arrow":"",title:"历史列表",onClickLeft:n.onClickLeft},null,8,["onClickLeft"]),f(v(l,{class:"margin-top-1",title:"",row:3},null,512),[[y,n.skeletonLoadding]]),(h(),w(C,null,[f(_("div",Et,[_("div",Ot,[_("div",Rt,[v(r,{round:"",width:"50px",height:"50px",fit:"cover",position:"left",src:n.insUserData.insUserPic},null,8,["src"])]),_("div",$t,[_("div",Ht,P(n.insUserData.insUserFullName),1),_("div",Bt,P(n.insUserData.insUserName),1)]),_("div",Ft,P(n.insUserData.hasSubscribe?"已订阅":"未订阅"),1),_("div",{class:"ins-user-subscriber-action",onClick:t[0]||(t[0]=e=>n.overlayShow=!0)},Kt)]),_("div",Mt,[_("div",Zt,P(n.insUserData.articleQuantity)+" 帖子",1),_("div",Jt,P(n.followNumHandler(n.insUserData.followedBy))+"粉丝",1),_("div",Gt,P(n.followNumHandler(n.insUserData.followed))+" 关注",1)]),_("div",Wt,P(n.insUserData.biography),1)],512),[[y,!n.skeletonLoadding]])],1024)),v(L,{active:n.activeName,"onUpdate:active":t[1]||(t[1]=e=>n.activeName=e),color:"#DCDCDC","line-height":"2px",onChange:i.changeTab},{default:g((()=>[v(x,{name:"p"},{title:g((()=>[v(d,{name:"qr"}),Qt])),default:g((()=>[f(v(l,{class:"margin-top-1",title:"",row:3},null,512),[[y,n.skeletonLoadding]]),f(_("div",Yt,[(h(!0),m(b,null,z(n.insPostData,((e,t)=>(h(),m("div",{class:"post-type margin-top",key:t},[_("i",{class:E(["post-type-position ins",2===e.isVideo?"ins-shexiangtou":8===e.isVideo?"ins-duotu":""])},null,2),v(c,{class:"post-checkbox-position",shape:"square",modelValue:e.checked,"onUpdate:modelValue":t=>e.checked=t},null,8,["modelValue","onUpdate:modelValue"]),_("div",{class:"post-img-wrap",onClick:t=>n.queryDetial(e.mediaKey)},[v(r,{width:"100px",height:"100px",fit:"cover",position:"left",src:e.postDisplay},null,8,["src"])],8,Xt)])))),128)),n.insPostData.length<=0?(h(),m("div",ea,ta)):k("",!0)],512),[[y,!n.skeletonLoadding]]),f(_("div",aa,[v(u,{type:"primary",block:"",onClick:n.downloadBatch,loading:n.downLoadding},{default:g((()=>[D(" 已选择 "+P(n.postCheckedNum)+" 批量下载 ",1)])),_:1},8,["onClick","loading"])],512),[[y,n.insPostData.length>0]]),f(_("a",{class:"down-tip",href:n.postDownloadZip,ref:"down"}," 点击下载压缩文件 ",8,na),[[y,n.postDownloadZip]])])),_:1}),v(x,{name:"tv"},{title:g((()=>[v(d,{name:"video-o"}),sa])),default:g((()=>[ia])),_:1}),v(x,{name:"tag"},{title:g((()=>[v(d,{name:"bookmark-o"}),oa])),default:g((()=>[la])),_:1})])),_:1},8,["active","onChange"]),ra,f(v(S,{size:"34px",vertical:"",style:{"text-align":"center"}},{default:g((()=>[da])),_:1},512),[[y,n.loadding]]),v(I,{show:n.overlayShow,onClick:t[3]||(t[3]=e=>n.overlayShow=!1)},{default:g((()=>[_("div",ca,[v(u,{color:"#fff",type:"primary",block:"",onClick:t[2]||(t[2]=O((e=>n.subscribe(n.insUserData.insUserId)),["stop"]))},{default:g((()=>[_("span",ua,P(n.insUserData.hasSubscribe?"取消订阅 TA":"订阅 TA"),1)])),_:1}),pa,v(u,{color:"#fff",type:"primary",block:""},{default:g((()=>[ha])),_:1})])])),_:1},8,["show"])],64)}],["__scopeId","data-v-627815ee"]]);const va=R({history:$(),routes:[{path:"/",redirect:"/home",meta:{keepAlive:!0}},{path:"/home",component:ne,name:"home",meta:{keepAlive:!0}},{path:"/record",component:be,name:"record"},{path:"/imageList",component:rt,name:"imageList",meta:{keepAlive:!1}},{path:"/historyList",component:ma,name:"historyList",meta:{keepAlive:!1}},{path:"/imageDownload",component:At,name:"ImageDownload"},{path:"/sub",component:_e,name:"sub"},{path:"/order",component:kt,name:"order"}]});H(J).use(va).use(B).mount("#app");
